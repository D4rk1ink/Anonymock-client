<div class="c-wrapper">
  <div class="c-header">
    <h4>Scraper</h4>
  </div>
  <div class="c-body">
    <div class="form-inline">
      <div class="w-100 form-input">
        <label class="label-title">
          Base API
        </label>
        <input type="text" name="name" class="" placeholder="base" />
      </div>
    </div>
  </div>
  <hr class="disable-margin">
  <ng-container *ngIf="!isLoading">
    <div class="c-list">
      <add-item-bar (click)="createEndpoint()">ADD ENDPOINT</add-item-bar>
      <div class="c-list-item endpoint" *ngFor="let endpoint of endpoints; let i = index" [class.animate-item-expand]="endpoint.isNew"
        [class.active]="endpoint.id === endpointTarget" (click)="onExpand(endpoint.id)">
        <div class="main-row">
          <div class="method">
            <span class="toggle-method toggle-{{ endpoint.method.name | lowercase }}">
              {{ endpoint.method.name }}
            </span>
          </div>
          <div class="name">
            {{ endpoint.name }}
          </div>
          <div class="path">
            {{ endpoint.path }}
          </div>
        </div>
        <div class="expand">
          <hr class="disable-margin">
          <!-- requestTarget is null -->
          <div class="requests" *ngIf="!requestTarget;else conetentRequestTarget">
            <div class="c-wrapper">
              <div class="c-header content-between">
                <h4>Requests</h4>
                <div (click)="createRequest(endpoint.id)">
                  <i class="material-icons btn-icon btn-sky-icon">add_box</i>
                </div>
              </div>
              <div class="c-list">
                <div class="c-list-item request disable-scale disable-border" *ngFor="let request of endpoint.requests; let i = index" (click)="onGotoRequest(request)"
                  [class.animate-item-expand]="request.isNew">
                  <div class="name" [routerLink]="'./'+request.id">
                    {{ request.name }}
                  </div>
                  <div class="options">
                    <div class="default" [class.active]="request.isDefault" (click)="setDefault(request)">
                      <i class="material-icons btn-icon btn-sky-icon">star</i>
                    </div>
                  </div>
                </div>
                <empty-item [items]="endpoint.requests" [isLoading]="false" [icon]="'folder_open'" [message]="'Empty Request'"></empty-item>
              </div>
            </div>
          </div>
          <!-- requestTarget not null -->
          <ng-template #conetentRequestTarget>
            <div class="request">
              <section class="section">
                <input type="text" name="name" [(ngModel)]="requestTarget.name" placeholder="Request name" />
              </section>
              <section class="section">

              </section>
            </div>
          </ng-template>
        </div>
      </div>
    </div>
  </ng-container>
</div>